- name: Deploy to Docker swarm

on : 
  workflow_run: 
    workflows: [Node.js CI]
    types :
      - completed
      
  jobs:
    update:
      uses: wshihadeh/docker-deployment-action@v1
      with:
        remote_docker_host: user@myswarm.com
        ssh_private_key: ${{ secrets.DOCKER_SSH_PRIVATE_KEY }}
        ssh_public_key: ${{ secrets.DOCKER_SSH_PUBLIC_KEY }}
        deployment_mode: docker-swarm
        copy_stack_file: true
        deploy_path: /root/my-deployment
        stack_file_name: docker-compose.yaml
        keep_files: 5
        args: my_applicaion
